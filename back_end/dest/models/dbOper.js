"use strict";var _regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=require("babel-runtime/helpers/asyncToGenerator"),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var operator={insertArticle:function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(r,t,n,a){var o;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.mongo.db(t).collection(n).insert(a);case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}},e,this)}));return function(e,r,t,n){return a.apply(this,arguments)}}(),updateArticle:function(){var o=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(r,t,n,a,o){var u,c;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=r.ObjectID,e.next=3,t.mongo.db(n).collection(a).update({_id:u(o.uniqueKey)},{$set:{content:""+o.content,type:""+o.type,date:""+o.date}});case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}},e,this)}));return function(e,r,t,n,a){return o.apply(this,arguments)}}(),getAllArticle:function(){var o=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(r,t,n,a,o){var u,c,i,s,l=!(5<arguments.length&&void 0!==arguments[5])||arguments[5];return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=(a-1)*o,o=parseInt(o),e.next=4,r.mongo.db(t).collection(n).find().sort({date:-1}).skip(u).limit(o).toArray();case 4:if(c=e.sent,!l){e.next=11;break}return e.next=8,r.mongo.db(t).collection(n).find().toArray();case 8:i=e.sent,s=i.length,c.total=s;case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}},e,this)}));return function(e,r,t,n,a){return o.apply(this,arguments)}}(),getArticleByID:function(){var o=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(r,t,n,a,o){var u,c;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=r.ObjectID,e.next=3,t.mongo.db(n).collection(a).find({_id:u(o)}).toArray();case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}},e,this)}));return function(e,r,t,n,a){return o.apply(this,arguments)}}(),delArticle:function(){var o=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(r,t,n,a,o){var u,c;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=r.ObjectID,e.next=3,t.mongo.db(n).collection(a).remove({_id:u(o)},1);case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}},e,this)}));return function(e,r,t,n,a){return o.apply(this,arguments)}}()};module.exports=operator;